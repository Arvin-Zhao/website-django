<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script>window.HELP_IMPROVE_VIDEOJS = false;</script>
    <link href="https://cdn.bootcdn.net/ajax/libs/video.js/7.8.3/video-js.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>Video Play</title>
</head>
<body style="background: silver">
    <video class="video-js" controls  data-setup='{}' style="width:1360px;height: 800px;margin: auto">
        <source src="{{ file_name }}" type="application/x-mpegURL" />
    </video>
</body>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/video.js/7.8.3/video.min.js"></script>
<script>
    videojs.Hls.xhr.beforeRequest = function(options) {
        if(options.uri.indexOf("filesrc") < 0){
            if(options.uri.indexOf(location.origin) > -1)            {
                options.uri = options.uri.substr(location.origin.length+1)
            }
            let url_prefix = location.origin+"/%3Ffilesrc=" + encodeURI("{{ file_src }}" + "\\.play\\" + options.uri)
            options.uri = url_prefix
        }


        return options;
    }
</script>
</html>